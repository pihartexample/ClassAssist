---
---
function showGrades(e){2===(e=CSVToArray(e,null)).length&&e.splice(1,0,[]),e=e[0].map((t,n)=>e.map(e=>e[n])),document.getElementById("loading-animation").classList.add("d-none");const t=document.getElementById("grades");t.innerHTML="",e.shift();const n=t.createTHead().insertRow();for(let e=0;e<3;e++){const t=document.createElement("th");t.textContent=0===e?"Student":1===e?firebase.auth().currentUser.displayName:"Max Points",n.appendChild(t)}e.filter(e=>e[2]).forEach(e=>{const n=t.insertRow();for(const[t,s]of e.entries()){const o=n.insertCell();if(0===t){const e=(s||"").split("ðŸŽƒ");e.forEach((e,n)=>{const s=document.createElement(0===n?"h7":"h9");(e=e.trim())&&(0===t&&0!==n?s.attachMarkdown(e):s.textContent=e,s.appendChild(document.createElement("br")),o.appendChild(s))}),e[1]&&e[1].trim()&&(o.classList.add("hasresources"),o.addEventListener("click",(function(){show(this)})))}else o.textContent=s,(1===t&&s<.45*e[2]||!s)&&o.classList.add("incomplete")}}),t.classList.remove("d-none")}function getGrades(e){if(e){const t=makeHttpObject(),n="https://docs.google.com/spreadsheets/d/{{ site.public_grades_spreadsheet_id }}/gviz/tq?tqx=out:csv&tq=",s=`select * where A="${e}" or A="Max"`;t.open("GET",n+s,!0),t.send(null),t.onreadystatechange=function(){4===t.readyState&&showGrades(t.responseText,!0,!1)}}}const refreshGrades=e=>{document.getElementById("loading-animation").classList.remove("d-none"),getGrades(e||firebase.auth().currentUser.uid)};firebase.auth().onAuthStateChanged(e=>{var t;e?(document.querySelector("#signIn").classList.add("d-none"),document.querySelector("#signOut").classList.remove("d-none"),t=e.uid,document.getElementById("loading-animation").classList.remove("d-none"),getGrades(t||firebase.auth().currentUser.uid),document.querySelector("#refresh").classList.remove("d-none")):(document.querySelector("#signIn").classList.remove("d-none"),document.querySelector("#signOut").classList.add("d-none"),document.querySelector("#loading-animation").classList.add("d-none"),document.querySelector("#grades").classList.add("d-none"),document.querySelector("#refresh").classList.add("d-none"))});